## v161208

- **Bug Fix:** Undefined variable `$caSe_insensitive`, corrected in this release.

## v161207

- Adding new config option: `amp_exclusions_enable` (default is enabled). This improves compatibility with [Accelerated Mobile Pages](https://www.ampproject.org/). When this option is enabled and the URI being compressed ends with `/amp/`, or the document contains a top-level `<html âš¡>` tag (`<html amp>` is accepted as well), then features which are incompatible with [Accelerated Mobile Pages](https://www.ampproject.org/) will be disabled accordingly, regardless of your other settings. See [Issue #695](https://github.com/websharks/comet-cache/issues/695) in the Comet Cache repo.
- Adding `isDocAmpd()` conditional check against current URI & document.
- Adding automatic AMP feature exclusions for improved AMP compatibility.
- Optimizing for speed by removing unnecessary calls to `unset()`.
- Enhancing unicode compatibility by taking full advantage of all `mb_*()` functions.
- Adding multibyte compatible `pregQuote()`.
- Adding multibyte compatible `replaceOnce()`.
- Adding multibyte compatible `substrReplace()`.
- Updating all regex patterns to add the `/u` flag for unicode compatibility.
- Updating minimum PHP requirement. Now requires PHP v5.4+ in support of short array syntax `[]`.

## v161108

- **Enhancing Exclusion Tests:** Now testing exclusion rules against full open tag instead of only the CSS or JS URL and content. This allows for exclusion rules that exclude CSS or JS based on an opening tag attribute; e.g., `<style id='rs-plugin-settings-inline-css'`. See also: [this Comet Cache issue](https://github.com/websharks/comet-cache/issues/614).

## v160118

- Adding support for URI exclusions. See: https://github.com/websharks/zencache/issues/651
- Updating to latest version of websharks/phings.
- Updating test file; i.e., adding test for URI exclusions.
- Updated README.md to mention URI exclusions.

## v150923

- Resolved a bug related to `$_SERVER['REQUEST_SCHEME']`. See: https://github.com/websharks/html-compressor/issues/73

## v150821

- Improved HTTP connection handling, timeouts, protocol, BOM markers, exceptions, `Referer:` and `User-Agent:` headers. See: websharks/html-compressor#69 for details. See also: https://github.com/websharks/zencache/issues/391

- Resolves a bug related to CSS pseudo selectors `:` and whitespace. See [this GitHub issue](https://github.com/websharks/html-compressor/issues/66) if you'd like additional details.

- `<noscript>` bug fix; i.e., these should be excluded automatically in order to preserve their intended purpose. The HTML Compressor now makes no adjustments to anything inside `<noscript>` tags, and the same has always been true for IE conditional comments as well. See also: https://github.com/websharks/html-compressor/issues/65

- Adding `css_url()` filter support for plugins like ZenCache that need to filter the URLs used in CSS whenever Static CDN Filters are applied. See: https://github.com/websharks/html-compressor/issues/62 See also: https://github.com/websharks/zencache/issues/427#issuecomment-121777746

## v150820

- Updating to latest release of CSS Minifier to resolve a bug related to spaces around `:` colons.

## v150819

- **Bug Fix:** The HTML Compressor now strips UTF-8  Byte Order Markers (BOMs) from CSS files generated by preprocessors such as Sass. Files consolidated by the HTML Compressor include an `@charset` rule already, making a BOM unnecessary. In fact, if BOMs are not stripped, some browsers will choke on portions of a consolidated CSS file, because a BOM could potentially appear in the middle of the file; i.e., at the _wrong_ place.

  _**Symptoms included:** mysterious missing styles in portions of the site, fonts not loading at all times, or font-based icons (e.g., FontAwesome) to render mystery glyphs instead of the icons._
- **Bug Fix:** Improved strict data type comparison when analyzing `$_SERVER` environment variables to detect an `https://` connection URL. We now detect `(integer)443` and `(string)443`. In addition, we can now pick up `$_SERVER['HTTPS']` being any of `1|on|yes|true` (caSe insensitive).

## v150424

- PSR 1, 2, 4 conformity.
- Composer dependency compat.
- Major restructuring and namespace changes.
- Adding support for JSON compression.
- Bringing back the PHAR file in each release.
- Adding `build.xml` and `composer.json`.

## v14xxxx

- Initial release.
